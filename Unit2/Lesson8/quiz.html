<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å²³é£å­¦å†™å­—é—¯å…³æ¸¸æˆ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #66b2e6 0%, #0092d3 50%, #005b99 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #fff;
            overflow-x: hidden;
        }

        /* æ¸¸æˆå®¹å™¨è¾¹æ¡†ä»é‡‘é»„æ”¹æˆåæ²™è‰²ç™½ */
        .game-container {
            width: 100%;
            max-width: 1000px;
            background-color: rgba(255, 255, 255, 0.06);
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            position: relative;
            border: 2px solid rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(10px);
        }

        /* é¡¶éƒ¨ï¼šæ·±æµ·è“æ¸å˜ + é‡‘è‰²æ ‡é¢˜ */
        .game-header {
            background: linear-gradient(to right, #0077b6, #005b99);
            color: #ffe08a;
            padding: 25px 30px;
            text-align: center;
            position: relative;
            border-bottom: 2px solid rgba(255, 255, 255, 0.4);
        }

        .game-header h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            letter-spacing: 2px;
        }

        .game-header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 700px;
            margin: 0 auto;
            color: #fff9c4;
        }

        /* æŠŠâ€œæœˆäº®â€æ”¹æˆæ›´åƒæµ·è¾¹é˜³å…‰çš„è‰²è°ƒï¼ˆåªæ˜¯é¢œè‰²å˜ï¼‰ */
        .moon-decoration {
            position: absolute;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #fff7d6 30%, #ffd54f 70%);
            border-radius: 50%;
            top: 20px;
            right: 30px;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.7);
        }

        .main-content {
            padding: 30px;
            min-height: 500px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="10" cy="90" r="2" fill="%23f4c97a"/><circle cx="40" cy="85" r="1.5" fill="%23e0b878"/><circle cx="70" cy="92" r="1" fill="%23f4c97a"/><circle cx="30" cy="75" r="2" fill="%23e0b878"/><circle cx="80" cy="88" r="1.5" fill="%23d3a76e"/><circle cx="20" cy="80" r="1" fill="%23f4c97a"/></svg>');
        }

        /* åœ°å›¾é¡µé¢æ ·å¼ */
        .map-container {
            text-align: center;
        }

        .map-title {
            font-size: 2.2rem;
            color: #ffcc00;
            margin-bottom: 40px;
            padding-bottom: 15px;
            border-bottom: 2px dashed #ffcc00;
            text-shadow: 0 0 5px rgba(255, 204, 0, 0.5);
        }

        /* åœ°å›¾ï¼šæµ·æ°´åˆ°æ²™æ»©çš„æ¸å˜ */
        .map {
            position: relative;
            height: 350px;
            background: linear-gradient(to bottom, rgba(0, 160, 233, 0.9) 0%, rgba(0, 119, 190, 0.95) 55%, rgba(249, 216, 127, 0.95) 100%);
            border-radius: 20px;
            margin: 0 auto 40px;
            overflow: hidden;
            box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(255, 255, 255, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .path {
            position: absolute;
            width: 85%;
            height: 12px;
            background: linear-gradient(to right, #fff59d, #fff176);
            top: 50%;
            left: 7.5%;
            transform: translateY(-50%);
            border-radius: 6px;
            box-shadow: 0 0 10px rgba(255, 235, 158, 0.6);
        }

        .levels-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 90%;
            position: relative;
            z-index: 2;
        }

        .level-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 28%;
        }

        .level-point {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            border: 3px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 15px;
            position: relative;
        }

        .level-point:hover {
            transform: scale(1.15);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.7);
        }

        .level-point.locked {
            background: #555 !important;
            cursor: not-allowed;
            filter: grayscale(0.8);
        }

        .level-point.locked:hover {
            transform: scale(1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .level-1 {
            background: radial-gradient(circle, #ff9900, #cc6600);
        }

        .level-2 {
            background: radial-gradient(circle, #ffcc00, #ff9900);
        }

        .level-3 {
            background: radial-gradient(circle, #ff6600, #cc3300);
        }

        .level-label {
            font-weight: bold;
            color: #ffcc00;
            font-size: 1.4rem;
            text-shadow: 0 0 5px rgba(255, 204, 0, 0.5);
            text-align: center;
            margin-top: 5px;
            background-color: rgba(44, 11, 54, 0.7);
            padding: 8px 15px;
            border-radius: 15px;
            border: 1px solid rgba(255, 204, 0, 0.3);
            width: 100%;
        }

        .level-description {
            color: #ffd966;
            font-size: 1rem;
            margin-top: 8px;
            opacity: 0.9;
        }

        .instructions {
            background-color: rgba(74, 35, 90, 0.5);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            border-left: 5px solid #ffcc00;
            color: #ffd966;
        }

        .instructions i {
            color: #ffcc00;
            margin-right: 10px;
        }

        /* æ¸¸æˆå…³å¡é€šç”¨æ ·å¼ */
        .game-level {
            display: none;
        }

        .level-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 204, 0, 0.3);
        }

        .level-title {
            font-size: 2rem;
            color: #ffcc00;
            text-shadow: 0 0 5px rgba(255, 204, 0, 0.5);
        }

        .level-progress {
            font-size: 1.3rem;
            color: #ffcc00;
            font-weight: bold;
            background-color: rgba(74, 35, 90, 0.5);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid rgba(255, 204, 0, 0.3);
        }

        /* å•é¢˜å®¹å™¨ */
        .question-container {
            background-color: rgba(44, 11, 54, 0.7);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            margin-bottom: 30px;
            min-height: 350px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            border: 2px solid rgba(255, 204, 0, 0.2);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-title {
            font-size: 1.8rem;
            color: #ffcc00;
        }

        .question-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px 0;
        }

        .question-text {
            font-size: 2rem;
            margin-bottom: 30px;
            color: #fff;
            text-align: center;
            line-height: 1.5;
        }

        /* ç¬¬ä¸€å…³ä¸“ç”¨æ‹¼éŸ³å­—ä½“ */
        .pinyin-text {
            font-family: "Arial", sans-serif;
            font-size: 1.6rem;
            letter-spacing: 1px;
        }

        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 100%;
            max-width: 700px;
        }

        .option {
            padding: 20px 25px;
            background-color: rgba(74, 35, 90, 0.7);
            border: 3px solid rgba(255, 204, 0, 0.3);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.4rem;
            text-align: center;
            font-weight: 500;
            color: #fff;
        }

        .option:hover {
            background-color: rgba(102, 51, 153, 0.8);
            border-color: #ffcc00;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.3);
        }

        .option.selected {
            background-color: rgba(255, 204, 0, 0.2);
            border-color: #ffcc00;
            color: #ffcc00;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(255, 204, 0, 0.5);
        }

        .option.correct {
            background-color: rgba(0, 200, 0, 0.3);
            border-color: #00cc00;
            color: #ccffcc;
        }

        .option.wrong {
            background-color: rgba(200, 0, 0, 0.3);
            border-color: #ff3333;
            color: #ffcccc;
        }

        /* ç¬¬äºŒå…³å›¾ç‰‡æ ·å¼ */
        .image-display {
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            width: 100%;
        }

        .image-container {
            width: 280px;
            height: 280px;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.1);
            border: 3px solid rgba(255, 204, 0, 0.3);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            position: relative;
        }

        .scene-container {
            width: 100%;
            height: 100%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .scene-element {
            position: absolute;
        }

        /* åœ†çš„å›¾ç‰‡ - ç©ºå¿ƒçš„åœ† */
        .empty-circle {
            width: 120px;
            height: 120px;
            border: 5px solid #ffcc00;
            border-radius: 50%;
            background-color: transparent;
        }

        /* äº®å›¾ç‰‡ - å‘å…‰çš„åœ† */
        .bright-circle {
            width: 140px;
            height: 140px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .glowing-circle {
            width: 120px;
            height: 120px;
            background: radial-gradient(circle, #FFFDE7 0%, #FFF9C4 20%, #FFEE58 60%, #FFD54F 100%);
            border-radius: 50%;
            box-shadow:
                0 0 60px rgba(255, 255, 255, 0.9),
                0 0 100px rgba(255, 255, 255, 0.6),
                0 0 140px rgba(255, 255, 255, 0.3),
                inset 0 0 20px rgba(255, 255, 255, 0.9);
            animation: glowPulse 2s infinite alternate;
            z-index: 2;
        }

        @keyframes glowPulse {
            from {
                box-shadow:
                    0 0 50px rgba(255, 255, 255, 0.8),
                    0 0 80px rgba(255, 255, 255, 0.5),
                    0 0 120px rgba(255, 255, 255, 0.2),
                    inset 0 0 15px rgba(255, 255, 255, 0.8);
            }

            to {
                box-shadow:
                    0 0 70px rgba(255, 255, 255, 1),
                    0 0 120px rgba(255, 255, 255, 0.7),
                    0 0 160px rgba(255, 255, 255, 0.4),
                    inset 0 0 25px rgba(255, 255, 255, 1);
            }
        }

        /* å›¾ç‰‡é€šç”¨æ ·å¼ */
        .question-image {
            max-width: 100%;
            max-height: 100%;
            border-radius: 10px;
            object-fit: contain;
        }

        .buttons-container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(to right, #ff9900, #cc6600);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(to right, #4a235a, #2c0b36);
            color: #ffcc00;
            border: 2px solid #ffcc00;
        }

        .btn-success {
            background: linear-gradient(to right, #ff6600, #cc3300);
            color: white;
        }

        .btn:disabled {
            background-color: #666;
            color: #999;
            cursor: not-allowed;
            transform: none;
            border: none;
        }

        .btn:hover:not(:disabled) {
            opacity: 0.9;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .feedback-container {
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            display: none;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .feedback-correct {
            background-color: rgba(0, 200, 0, 0.2);
            border: 2px solid #00cc00;
            color: #ccffcc;
        }

        .feedback-wrong {
            background-color: rgba(200, 0, 0, 0.2);
            border: 2px solid #ff3333;
            color: #ffcccc;
        }

        .feedback-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .feedback-text {
            font-size: 1.4rem;
            font-weight: bold;
        }

        /* æ‹¼éŸ³å­—ä½“ç»Ÿä¸€ */
        .pinyin-feedback {
            font-family: "Arial", sans-serif;
            font-size: 1.5rem;
            letter-spacing: 1px;
            font-weight: bold;
            margin-top: 5px;
        }

        .control-buttons {
            display: flex;
            gap: 15px;
        }

        .btn-small {
            padding: 10px 20px;
            font-size: 1rem;
        }

        /* å…³å¡å®Œæˆæç¤º */
        .level-complete-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.5s;
        }

        .level-complete-content {
            background: linear-gradient(135deg, #4a235a, #2c0b36);
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            max-width: 500px;
            width: 90%;
            border: 3px solid #ffcc00;
            box-shadow: 0 0 30px rgba(255, 204, 0, 0.5);
            animation: scaleIn 0.5s;
        }

        @keyframes scaleIn {
            from {
                transform: scale(0.8);
                opacity: 0;
            }

            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .complete-icon {
            font-size: 5rem;
            color: #ffcc00;
            margin-bottom: 20px;
            animation: bounce 1s infinite alternate;
        }

        @keyframes bounce {
            from {
                transform: translateY(0);
            }

            to {
                transform: translateY(-15px);
            }
        }

        .complete-title {
            font-size: 2.5rem;
            color: #ffcc00;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
        }

        .complete-message {
            font-size: 1.4rem;
            color: #ffd966;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        /* ç»“æœé¡µé¢æ ·å¼ */
        .result-container {
            text-align: center;
            padding: 40px 20px;
        }

        .result-icon {
            font-size: 6rem;
            margin-bottom: 20px;
            color: #ffcc00;
            text-shadow: 0 0 20px rgba(255, 204, 0, 0.7);
        }

        .result-title {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #ffcc00;
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
        }

        .result-details {
            background-color: rgba(44, 11, 54, 0.7);
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            margin: 20px auto;
            text-align: left;
            border: 2px solid rgba(255, 204, 0, 0.2);
        }

        .result-details h3 {
            color: #ffcc00;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 204, 0, 0.3);
        }

        .result-summary {
            color: #ffd966;
            font-size: 1.2rem;
            margin-bottom: 25px;
            line-height: 1.5;
            text-align: center;
        }

        .learned-item {
            background-color: rgba(255, 204, 0, 0.1);
            border-left: 4px solid #ffcc00;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
        }

        .learned-title {
            color: #ffcc00;
            font-size: 1.5rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .learned-words {
            color: #fff;
            font-size: 1.3rem;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .highlight-word {
            color: #ffcc00;
            font-weight: bold;
            font-size: 1.4rem;
        }

        .learned-pinyin {
            font-family: "Arial", sans-serif;
            color: #ffd966;
            font-size: 1.2rem;
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        .learned-example {
            color: #ffd966;
            font-size: 1.1rem;
            margin-top: 8px;
            line-height: 1.4;
        }

        .example-sentence {
            background-color: rgba(255, 255, 255, 0.05);
            padding: 8px 12px;
            border-radius: 5px;
            margin-top: 5px;
            border-left: 3px solid rgba(255, 204, 0, 0.5);
        }

        .example-word {
            color: #ffcc00;
            font-weight: bold;
        }

        /* ç¯ç¬¼è£…é¥° */
        .lantern {
            position: absolute;
            width: 40px;
            height: 60px;
            background: radial-gradient(ellipse, #ff3333, #cc0000);
            border-radius: 20px;
            top: 10px;
            left: 20px;
            box-shadow: 0 0 15px rgba(255, 51, 51, 0.7);
            animation: swing 3s infinite alternate;
        }

        .lantern:after {
            content: '';
            position: absolute;
            width: 5px;
            height: 15px;
            background: #ff9900;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
        }

        .lantern.right {
            left: auto;
            right: 20px;
            animation-delay: 1s;
        }

        @keyframes swing {
            0% {
                transform: rotate(-5deg);
            }

            100% {
                transform: rotate(5deg);
            }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }

            .game-header h1 {
                font-size: 2rem;
            }

            .question-text {
                font-size: 1.6rem;
            }

            .option {
                font-size: 1.2rem;
                padding: 15px;
            }

            .buttons-container {
                flex-direction: column;
                gap: 15px;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            .control-buttons {
                flex-direction: column;
            }

            .levels-container {
                flex-direction: column;
                height: 100%;
                justify-content: space-around;
            }

            .level-item {
                width: 100%;
                margin-bottom: 30px;
            }

            .path {
                width: 12px;
                height: 85%;
                left: 50%;
                top: 7.5%;
                transform: translateX(-50%);
            }

            .map {
                height: 500px;
            }

            .image-container {
                width: 250px;
                height: 250px;
            }

            .empty-circle {
                width: 100px;
                height: 100px;
            }

            .bright-circle {
                width: 120px;
                height: 120px;
            }

            .glowing-circle {
                width: 100px;
                height: 100px;
            }
        }

        .dropdown-container {
            position: absolute;
            top: 20px;
            left: 20px;
        }

        .dropbtn {
            background-color: rgba(0, 0, 0, 0.4);
            color: #ffe08a;
            font-size: 22px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            padding: 6px 10px;
            transition: background 0.3s ease;
        }

        .dropbtn:hover {
            background-color: rgba(0, 0, 0, 0.6);
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(15px);
            min-width: 200px;
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.6);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: 8px;
            z-index: 1000;
            padding: 4px 0;
        }

        .dropdown-content a {
            color: #ffe08a;
            padding: 14px 20px;
            text-decoration: none;
            display: block;
            transition: all 0.2s ease;
            font-size: 0.95rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .dropdown-content a:last-child {
            border-bottom: none;
        }

        .dropdown-content a:hover {
            background: rgba(255, 235, 138, 0.3);
            color: #fff;
            padding-left: 24px;
            transform: translateX(4px);
        }

        .dropdown-content a.active {
            background: rgba(255, 235, 59, 0.4);
            font-weight: bold;
        }

        .show {
            display: block;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
</head>

<body>
    <!-- å…³å¡å®Œæˆæç¤ºå±‚ -->
    <div class="level-complete-overlay" id="level-complete-overlay">
        <div class="level-complete-content">
            <div class="complete-icon" id="complete-icon">
                <i class="fas fa-trophy"></i>
            </div>
            <h2 class="complete-title" id="complete-title">æ­å–œå®Œæˆç¬¬ä¸€å…³ï¼</h2>
            <p class="complete-message" id="complete-message">æ‚¨å·²æˆåŠŸæŒæ¡æœ¬å‘¨è¯è¯­çš„æ­£ç¡®æ‹¼éŸ³ï¼å¯ä»¥è¿›å…¥ä¸‹ä¸€å…³äº†ï¼</p>
            <button class="btn btn-success" id="continue-button">
                <i class="fas fa-arrow-right"></i> ç»§ç»­ä¸‹ä¸€å…³
            </button>
        </div>
    </div>

    <div class="game-container">

        <!-- ç¯ç¬¼è£…é¥° -->
        <div class="lantern"></div>
        <div class="lantern right"></div>

        <div class="game-header">
            <h1>ğŸŒ¿å²³é£å­¦å†™å­—ğŸŒ¿ï¼ˆä¸‹ï¼‰é—¯å…³æ¸¸æˆ</h1>
            <p>é€šè¿‡ä¸‰å…³æŒ‘æˆ˜ï¼ŒæŒæ¡å²³é£ç›¸å…³ç”Ÿè¯ï¼šæ‹¼éŸ³åŒ¹é…ã€è¯»å¥å­é€‰æ­£ç¡®æ„æ€å’Œé€‰è¯å¡«ç©º</p>
            <div class="moon-decoration"></div>
        </div>

        <div class="main-content">
            <!-- NEW: Consistent Navigation Menu -->
            <div class="dropdown-container">
                <button class="dropbtn">â˜°</button>
                <div class="dropdown-content">
                     <a href="read.html">ğŸ“– é˜…è¯»</a>
                    <a href="wordice.html">ğŸ² å­—å¡éª°å­</a>
                    <a href="splice.html">ğŸ§© å¥å­æ‹¼å›¾</a>
                    <a href="connect4_prev.html">ğŸ®å¬å†™(ä¸Š) Connect 4</a>
                    <a href="quiz_prev.html">âš¡ é—¯å…³æ¸¸æˆï¼ˆä¸Šï¼‰</a>
                    <a href="quiz.html" class="active">âš¡ é—¯å…³æ¸¸æˆï¼ˆä¸‹ï¼‰</a>
                    <a href="connect4.html">ğŸ®å¬å†™ï¼ˆä¸‹ï¼‰Connect 4</a>
                </div>
            </div>
            <!-- åœ°å›¾é¡µé¢ -->
            <div id="map-page" class="map-container">
                <h2 class="map-title">å²³é£é—¯å…³åœ°å›¾ï¼ˆä¸‹ï¼‰</h2>
                <div class="map">
                    <div class="path"></div>
                    <div class="levels-container">
                        <div class="level-item">
                            <div class="level-point level-1" data-level="1">
                                <i class="fas fa-language"></i>
                            </div>
                            <div class="level-label">æ‹¼éŸ³åŒ¹é…</div>
                            <div class="level-description">åŒ¹é…è¯è¯­ä¸æ­£ç¡®æ‹¼éŸ³</div>
                        </div>

                        <div class="level-item">
                            <div class="level-point level-2 locked" data-level="2">
                                <i class="fas fa-images"></i>
                            </div>
                            <div class="level-label">è¯»å¥å­</div>
                            <div class="level-description">è¯»å¥å­é€‰æ­£ç¡®æ„æ€</div>
                        </div>

                        <div class="level-item">
                            <div class="level-point level-3 locked" data-level="3">
                                <i class="fas fa-edit"></i>
                            </div>
                            <div class="level-label">é€‰è¯å¡«ç©º</div>
                            <div class="level-description">é€‰æ‹©åˆé€‚çš„è¯è¯­å¡«ç©º</div>
                        </div>
                    </div>
                </div>
                <div class="instructions">
                    <p><i class="fas fa-info-circle"></i> æ¸¸æˆè¯´æ˜ï¼šç‚¹å‡»å…³å¡å›¾æ ‡å¼€å§‹æŒ‘æˆ˜ã€‚æ¯ä¸ªå…³å¡æœ‰å‡ é“é¢˜ç›®ï¼Œå®Œæˆå½“å‰å…³å¡æ‰èƒ½è§£é”ä¸‹ä¸€å…³ã€‚è®©æˆ‘ä»¬ä¸€èµ·å­¦å¾—åƒå²³é£é‚£æ ·ï¼Œè¶Šé£è¶Šé«˜ï¼</p>
                </div>
            </div>

            <!-- ç¬¬ä¸€å…³ï¼šæ‹¼éŸ³åŒ¹é… -->
            <div id="level-1" class="game-level">
                <div class="level-header">
                    <h2 class="level-title">ç¬¬ä¸€å…³ï¼šç”Ÿè¯å’Œæ‹¼éŸ³åŒ¹é…</h2>
                    <div class="level-progress">é¢˜ç›®: <span id="level1-progress">1/15</span></div>
                </div>

                <div class="question-container">
                    <div class="question-header">
                        <div class="question-title" id="level1-question-title">è¯è¯­ï¼š<span id="current-word">ä¼ è¯´</span>
                        </div>
                    </div>

                    <div class="question-content">
                        <div class="question-text">è¯·é€‰æ‹©æ­£ç¡®çš„æ‹¼éŸ³ï¼š</div>
                        <div class="options-container" id="level1-options">
                            <!-- é€‰é¡¹ä¼šé€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>

                        <div class="feedback-container" id="level1-feedback">
                            <!-- åé¦ˆä¼šé€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-secondary" id="back-to-map-1">
                        <i class="fas fa-map"></i> è¿”å›åœ°å›¾
                    </button>
                    <div class="control-buttons">
                        <button class="btn btn-secondary btn-small" id="prev-level1" disabled>
                            <i class="fas fa-arrow-left"></i> ä¸Šä¸€é¢˜
                        </button>
                        <button class="btn btn-secondary btn-small" id="reset-level1" disabled>
                            <i class="fas fa-redo"></i> é‡æ–°é€‰æ‹©
                        </button>
                        <button class="btn btn-primary" id="next-level1" disabled>
                            ä¸‹ä¸€é¢˜ <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ç¬¬äºŒå…³ï¼šè¯»å¥å­é€‰æ­£ç¡®æ„æ€ï¼ˆå²³é£ï¼Œä¸ç”¨å›¾ç‰‡ï¼‰ -->
            <div id="level-2" class="game-level">
                <div class="level-header">
                    <h2 class="level-title">ç¬¬äºŒå…³ï¼šè¯»å¥å­é€‰æ­£ç¡®æ„æ€ï¼ˆå²³é£ï¼‰</h2>
                    <div class="level-progress">é¢˜ç›®: <span id="level2-progress">1/4</span></div>
                </div>

                <div class="question-container">
                    <div class="question-header">
                        <div class="question-title" id="level2-question-title">
                            ç¬¬ <span id="current-question-num">1</span> é¢˜
                        </div>
                    </div>

                    <div class="question-content">
                        <!-- æç¤ºæ–‡å­—æ”¹æˆâ€œçœ‹å¥å­é€‰ç­”æ¡ˆâ€ -->
                        <div class="question-text">
                            è¯·è¯»ä¸€è¯»ä¸‹é¢çš„å¥å­ï¼Œé€‰æ‹©åˆé€‚çš„ç­”æ¡ˆï¼š
                        </div>

                        <!-- åŸæ¥æ”¾å›¾ç‰‡çš„å®¹å™¨ï¼Œä¿ç•™ idï¼Œè®© JS ç”¨å®ƒæ¥æ”¾å¥å­ -->
                        <div class="image-display" id="level2-image-display">
                            <!-- å¥å­ä¼šé€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
                        </div>

                        <!-- é€‰é¡¹åŒºåŸŸï¼Œä¿æŒä¸å˜ -->
                        <div class="options-container" id="level2-options">
                            <!-- é€‰é¡¹ä¼šé€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
                        </div>

                        <!-- åé¦ˆåŒºåŸŸï¼Œä¿æŒä¸å˜ -->
                        <div class="feedback-container" id="level2-feedback">
                            <!-- åé¦ˆä¼šé€šè¿‡ JavaScript åŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-secondary" id="back-to-map-2">
                        <i class="fas fa-map"></i> è¿”å›åœ°å›¾
                    </button>
                    <div class="control-buttons">
                        <button class="btn btn-secondary btn-small" id="prev-level2" disabled>
                            <i class="fas fa-arrow-left"></i> ä¸Šä¸€é¢˜
                        </button>
                        <button class="btn btn-secondary btn-small" id="reset-level2" disabled>
                            <i class="fas fa-redo"></i> é‡æ–°é€‰æ‹©
                        </button>
                        <button class="btn btn-primary" id="next-level2" disabled>
                            ä¸‹ä¸€é¢˜ <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>


            <!-- ç¬¬ä¸‰å…³ï¼šé€‰è¯å¡«ç©º -->
            <div id="level-3" class="game-level">
                <div class="level-header">
                    <h2 class="level-title">ç¬¬ä¸‰å…³ï¼šé€‰è¯å¡«ç©º</h2>
                    <div class="level-progress">é¢˜ç›®: <span id="level3-progress">1/13</span></div>
                </div>

                <div class="question-container">
                    <div class="question-header">
                        <div class="question-title" id="level3-question-title">é€‰è¯å¡«ç©º</div>
                    </div>

                    <div class="question-content">
                        <div class="question-text" id="level3-sentence">ä½ çœ‹ï¼Œä»Šæ™šçš„æœˆäº®åˆå¤§åˆ_____ã€‚</div>

                        <div class="options-container" id="level3-options">
                            <!-- é€‰é¡¹ä¼šé€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>

                        <div class="feedback-container" id="level3-feedback">
                            <!-- åé¦ˆä¼šé€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                    </div>
                </div>

                <div class="buttons-container">
                    <button class="btn btn-secondary" id="back-to-map-3">
                        <i class="fas fa-map"></i> è¿”å›åœ°å›¾
                    </button>
                    <div class="control-buttons">
                        <button class="btn btn-secondary btn-small" id="prev-level3" disabled>
                            <i class="fas fa-arrow-left"></i> ä¸Šä¸€é¢˜
                        </button>
                        <button class="btn btn-secondary btn-small" id="reset-level3" disabled>
                            <i class="fas fa-redo"></i> é‡æ–°é€‰æ‹©
                        </button>
                        <button class="btn btn-primary" id="next-level3" disabled>
                            ä¸‹ä¸€é¢˜ <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ç»“æœé¡µé¢ -->
            <div id="result-page" class="game-level result-container">
                <div class="result-icon">
                    <i class="fas fa-flag"></i>
                </div>
                <h2 class="result-title" id="result-title">æ­å–œå®Œæˆæ‰€æœ‰å…³å¡ï¼</h2>
                <div class="result-details">
                    <h3>å­¦ä¹ æˆæœæ€»ç»“</h3>
                    <p class="result-summary">é€šè¿‡ä¸‰å…³æŒ‘æˆ˜ï¼Œæ‚¨å·²ç»è®¤è¯†å’Œç†è§£äº†å²³é£ç›¸å…³çš„ç”Ÿè¯å’ŒçŸ¥è¯†ï¼š</p>
                    <!-- ç¬¬ä¸€å…³ï¼šç”Ÿè¯å’Œæ‹¼éŸ³åŒ¹é…ï¼ˆè¯æ±‡ï¼‰ -->
                    <div class="learned-item">
                        <div class="learned-title">ç¬¬ä¸€å…³ - ç”Ÿè¯å’Œæ‹¼éŸ³åŒ¹é…</div>
                        <div class="learned-words">æˆ‘ä»¬å­¦ä¼šäº†åäº”ä¸ªå¸¸ç”¨è¯è¯­çš„æ­£ç¡®æ‹¼éŸ³ï¼š</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">å…¨éƒ¨</span> (quÃ¡nbÃ¹)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">äº¤ç»™</span> (jiÄogÄ›i)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">éš¾é“</span> (nÃ¡ndÃ o)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">å¿˜äº†</span> (wÃ ngle)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">ç«‹åˆ»</span> (lÃ¬kÃ¨)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">æ˜ç™½</span> (mÃ­ngbai)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">ä»æ­¤</span> (cÃ³ngcÇ)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">é“ºåœ¨</span> (pÅ«zÃ i)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">å½“ä½œ</span> (dÄngzuÃ²)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">æ¯å¤©</span> (mÄ›itiÄn)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">ä¸ä½†</span> (bÃºdÃ n)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">è€Œä¸”</span> (Ã©rqiÄ›)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">å†å²</span> (lÃ¬shÇ)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">äº†ä¸èµ·</span> (liÇobuqÇ)</div>
                        <div class="learned-pinyin">â€¢ <span class="highlight-word">è¯—äºº</span> (shÄ«rÃ©n)</div>
                    </div>

                    <!-- ç¬¬äºŒå…³ï¼šå²³é£å°é—®ç­”ï¼ˆé˜…è¯»ç†è§£ï¼‰ -->
                    <div class="learned-item">
                        <div class="learned-title">ç¬¬äºŒå…³ - å²³é£å°é—®ç­”</div>
                        <div class="learned-words">æˆ‘ä»¬é€šè¿‡å›ç­”é—®é¢˜ï¼Œç†è§£äº†å²³é£å­¦å†™å­—çš„æ•…äº‹ï¼š</div>
                        <div class="learned-example">â€¢ å²³é£æ²¡æœ‰ä¹°çº¸å’Œç¬”ï¼Œè€Œæ˜¯æ‹¿å›äº†<span class="highlight-word">æ²™å’Œæ ‘æ</span></div>
                        <div class="learned-example">â€¢ ç”¨<span class="highlight-word">æ ‘æåœ¨æ²™ä¸Šå†™å­—</span>ä»£æ›¿çº¸å’Œç¬”</div>
                        <div class="learned-example">â€¢ å²³é£å°æ—¶å€™å®¶é‡Œç©·ï¼Œä½†ä»–<span class="highlight-word">åšæŒå­¦ä¹ ï¼Œåˆ»è‹¦ç»ƒå­—</span></div>
                        <div class="learned-example">â€¢ æˆ‘ä»¬è¦å‘å²³é£å­¦ä¹ ï¼Œ<span class="highlight-word">é‡åˆ°å›°éš¾ä¹Ÿä¸è¦æ”¾å¼ƒï¼ŒåšæŒåŠªåŠ›</span></div>
                    </div>

                    <!-- ç¬¬ä¸‰å…³ï¼šè¯¾æ–‡å¡«ç©ºï¼ˆå²³é£å­¦å†™å­—ï¼‰ -->
                    <div class="learned-item">
                        <div class="learned-title">ç¬¬ä¸‰å…³ - æ ¹æ®è¯¾æ–‡å†…å®¹å¡«ç©º</div>
                        <div class="learned-words">æˆ‘ä»¬é€šè¿‡å¡«ç©ºï¼ŒåŠ æ·±äº†å¯¹å²³é£å­¦å†™å­—æ•…äº‹çš„ç†è§£ï¼š</div>
                        <div class="example-sentence">â€¢ å²³é£æ˜¯ä¸­å›½ä¸€ä½<span class="example-word">ç™¾æˆ˜ç™¾èƒœçš„å°†å†›</span>ã€‚</div>
                        <div class="example-sentence">â€¢ å°æ—¶å€™å®¶ä¸­è´«ç©·ï¼Œç”±<span class="example-word">æ¯äº²</span>å…»æ´»ä»–ã€‚</div>
                        <div class="example-sentence">â€¢ æ²¡æœ‰çº¸ç¬”æ—¶ï¼Œä»–ç”¨<span class="example-word">æ²™å’Œæ ‘æ</span>ç»ƒå­—ã€‚</div>
                        <div class="example-sentence">â€¢ å²³é£é•¿å¤§åï¼Œæˆä¸ºä¸€ä½<span class="example-word">å‹‡æ•¢çš„å°†å†›å’Œäº†ä¸èµ·çš„è¯—äºº</span>ã€‚</div>
                    </div>

                    <p style="margin-top: 25px; text-align: center; color: #ffd966; font-size: 1.3rem;">
                        æ„¿ä½ åƒå²³é£ä¸€æ ·ï¼Œçˆ±å›½ã€åˆ»è‹¦ã€åˆæœ‰æ‹…å½“ï¼<i class="fas fa-heart" style="color:#ff3333; margin-left:8px;"></i>
                    </p>
                </div>
                <button class="btn btn-success" id="restart-game">
                    <i class="fas fa-redo"></i> é‡æ–°å¼€å§‹æ¸¸æˆ
                </button>
            </div>

        </div>
    </div>

    <script>
        // æ¸¸æˆæ•°æ®å’ŒçŠ¶æ€
        const gameData = {
            currentLevel: 1,
            levelCompleted: [false, false, false],

            // ç¬¬ä¸€å…³ï¼šç”Ÿè¯å’Œæ‹¼éŸ³åŒ¹é…ï¼ˆå²³é£ï¼‰
            level1: {
                title: "ç”Ÿè¯å’Œæ‹¼éŸ³åŒ¹é…ï¼ˆå²³é£ï¼‰",
                questions: [
                    { word: "å…¨éƒ¨", pinyin: "quÃ¡nbÃ¹", options: ["quÃ¡nbÃ¹", "quÇnbÃ¹", "quÃ¡nbÃº", "quÇnbÃº"] },
                    { word: "äº¤ç»™", pinyin: "jiÄogÄ›i", options: ["jiÄogÄ›i", "jiÃ¡ogÄ›i", "jiÄogÃ©i", "jiÇogÄ›i"] },
                    { word: "éš¾é“", pinyin: "nÃ¡ndÃ o", options: ["nÃ¡ndÃ o", "nÃ¡ndao", "nÇndÃ o", "nÃ ndÃ o"] },
                    { word: "å¿˜äº†", pinyin: "wÃ ngle", options: ["wÃ ngle", "wÃ¡ngle", "wÃ ngliÃ¨", "wÇngle"] },
                    { word: "ç«‹åˆ»", pinyin: "lÃ¬kÃ¨", options: ["lÃ¬kÃ¨", "lÃ­kÃ¨", "lÃ¬kÃ©", "lÇkÃ¨"] },
                    { word: "æ˜ç™½", pinyin: "mÃ­ngbai", options: ["mÃ­ngbai", "mÃ­ngbÃ¡i", "mÄ«ngbai", "mÃ­ngbei"] },
                    { word: "ä»æ­¤", pinyin: "cÃ³ngcÇ", options: ["cÃ³ngcÇ", "cÃ³ngcÃ­", "cÅngcÇ", "cÃ³ngchÇ"] },
                    { word: "é“ºåœ¨", pinyin: "pÅ«zÃ i", options: ["pÅ«zÃ i", "pÇ”zÃ i", "pÃºzÃ i", "pÅ«zhÃ i"] },
                    { word: "å½“ä½œ", pinyin: "dÄngzuÃ²", options: ["dÃ ngzuÃ²", "dÄngzuÃ²", "dÃ ngzuÃ³", "dÇngzuÃ²"] },
                    { word: "æ¯å¤©", pinyin: "mÄ›itiÄn", options: ["mÄ›itiÄn", "mÃ¨itiÄn", "mÄ›itÄn", "mÃ itiÄn"] },
                    { word: "ä¸ä½†", pinyin: "bÃºdÃ n", options: ["bÃºdÃ n", "bÃ¹dÃ n", "bÃºdÄn", "bÇ”dÃ n"] },
                    { word: "è€Œä¸”", pinyin: "Ã©rqiÄ›", options: ["Ã©rqiÄ›", "Ã©rqie", "Ä›rqiÄ›", "Ã©rqiÃ©"] },
                    { word: "å†å²", pinyin: "lÃ¬shÇ", options: ["lÃ¬shÇ", "lÇshÇ", "lÃ¬shi", "lÇshi"] },
                    { word: "äº†ä¸èµ·", pinyin: "liÇobuqÇ", options: ["liÇobuqÇ", "lebuqÇ", "liÇobuqi", "liÇoqÇ"] },
                    { word: "è¯—äºº", pinyin: "shÄ«rÃ©n", options: ["shÄ«rÃ©n", "shÃ­rÃ©n", "shÇrÃ©n", "shÄ«ren"] }
                ],
                currentQuestionIndex: 0,
                userAnswers: [null, null, null, null]
            },

            // ç¬¬äºŒå…³ï¼šè¯»å¥å­é€‰æ­£ç¡®æ„æ€ï¼ˆå²³é£ï¼Œå¥å­å½¢å¼ï¼Œä¸ç”¨å›¾ç‰‡ï¼‰
            level2: {
                title: "å²³é£å°é—®ç­”ï¼ˆæ›´æ–°ï¼‰",
                questions: [
                    {
                        sentence:
                            "å²³é£æ²¡æœ‰ä¹°çº¸å’Œç¬”ï¼Œä»–æ‹¿å›æ¥ä»€ä¹ˆï¼Ÿè¯·åŒå­¦ä»¬æƒ³æƒ³ï¼Œå²³é£æ‹¿å›å®¶çš„è¿™äº›ä¸œè¥¿æœ‰ä»€ä¹ˆç”¨ï¼Ÿç°¸ç®•æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿå²³é£ä¸ºä»€ä¹ˆæ²¡æœ‰ä¹°çº¸å’Œç¬”ï¼Ÿå–å¸ƒçš„é’±å‘¢ï¼Ÿ",
                        correctAnswer: "åŸæ¥å²³é£æ‹¿å›å®¶çš„æ˜¯æ²™å’Œæ ‘æ",
                        options: [
                            "åŸæ¥å²³é£æ‹¿å›å®¶çš„æ˜¯æ²™å’Œæ ‘æ",
                            "ä»–ä¹°äº†å¾ˆå¤šçº¸",
                            "ä»–æ‹¿äº†çŸ³å¤´å’Œæ°´",
                            "ä»–ç©ºæ‰‹å›å®¶äº†"
                        ]
                    },
                    {
                        sentence:
                            "åŸæ¥å²³é£çš„çº¸å’Œç¬”å°±æ˜¯æ²™å’Œæ ‘æã€‚æ²™å’Œæ ‘ææ€ä¹ˆå†™å­—ï¼ŸåŒå­¦ä»¬æœ‰åœ¨æ²™æ»©ä¸Šç©çš„ç»éªŒå—ï¼Ÿ",
                        correctAnswer: "ç”¨æ ‘æåœ¨æ²™ä¸Šå†™å­—",
                        options: [
                            "ç”¨æ ‘æåœ¨æ²™ä¸Šå†™å­—",
                            "ç”¨ç¬”åœ¨ç©ºæ°”ä¸­å†™å­—",
                            "ç”¨æ°´å†™åœ¨å¸ƒä¸Š",
                            "ä¸ç”¨å†™å­—"
                        ]
                    },
                    {
                        sentence:
                            "å²³é£å°æ—¶å€™è™½ç„¶å®¶å¢ƒè´«å›°ï¼Œä½†ä»–åšæŒå­¦ä¹ ã€åˆ»è‹¦ç»ƒå­—ã€‚ä½ è§‰å¾—æˆ‘ä»¬å¯ä»¥ä»å²³é£èº«ä¸Šå­¦åˆ°ä»€ä¹ˆï¼Ÿ",
                        correctAnswer: "é‡åˆ°å›°éš¾ä¹Ÿä¸è¦æ”¾å¼ƒï¼ŒåšæŒåŠªåŠ›",
                        options: [
                            "é‡åˆ°å›°éš¾ä¹Ÿä¸è¦æ”¾å¼ƒï¼ŒåšæŒåŠªåŠ›",
                            "åŠªåŠ›æ²¡ç”¨ï¼Œå°±æ”¾å¼ƒ",
                            "åªè¦æœ‰é’±å°±èƒ½æˆåŠŸ",
                            "åˆ«äººå¸®æˆ‘å­¦å°±è¡Œ"
                        ]
                    },
                    {
                        sentence:
                            "å²³é£ä¸ä»…æ˜¯ä¸ªå°†å†›ï¼Œè€Œä¸”è¿˜æ˜¯ä¸ªè¯—äººã€‚åŒå­¦ä»¬ä»Šå¤©çš„å­¦ä¹ æ¡ä»¶å¯æ˜¯æ¯”å²³é£å¥½å¤ªå¤šäº†ï¼Œä½ ä»¬æœ‰æ²¡æœ‰åƒå²³é£ä¸€æ ·åŠªåŠ›å‘¢ï¼Ÿ",
                        correctAnswer: "è¦å‘å²³é£å­¦ä¹ ï¼ŒåŠªåŠ›è¯»ä¹¦",
                        options: [
                            "è¦å‘å²³é£å­¦ä¹ ï¼ŒåŠªåŠ›è¯»ä¹¦",
                            "å­¦ä¹ å¤ªéš¾å°±æ”¾å¼ƒ",
                            "åªç©ä¸å­¦ä¹ ",
                            "åªç»ƒæ­¦æœ¯ä¸è¯»ä¹¦"
                        ]
                    }
                ],
                currentQuestionIndex: 0,
                userAnswers: [null, null, null]
            },
            // ç¬¬ä¸‰å…³ï¼šå²³é£å°é—®ç­”
            level3: {
                title: "å²³é£å°é—®ç­”",
                questions: [
                    {
                        sentence: "800å¤šå¹´ä»¥å‰ï¼Œä¸­å›½æœ‰ä¸€ä½_____çš„å°†å†›ï¼Œä»–çš„åå­—å«å²³é£ã€‚",
                        correctAnswer: "ç™¾æˆ˜ç™¾èƒœ",
                        options: ["ç™¾æˆ˜ç™¾èƒœ", "æœ‰å", "å¹´è½»", "å¿«ä¹"]
                    },
                    {
                        sentence: "å²³é£å¾ˆå°çš„æ—¶å€™ï¼Œçˆ¶äº²å°±æ­»äº†ï¼Œä»–å®¶é‡Œå¾ˆç©·ï¼Œæ˜¯_____å…»æ´»ä»–çš„ã€‚",
                        correctAnswer: "æ¯äº²",
                        options: ["æ¯äº²", "çˆ·çˆ·", "è€å¸ˆ", "å”å”"]
                    },
                    {
                        sentence: "å²³é£å…­å²æ—¶çŸ¥é“å®¶é‡Œæ²¡æœ‰é’±ä¸Šå­¦ï¼Œå°±å¯¹æ¯äº²è¯´ï¼šâ€œå¦ˆå¦ˆï¼Œè®©æ‚¨æ¥_____ï¼Œæ•™æˆ‘è¯»ä¹¦å†™å­—ï¼Œå¥½ä¸å¥½ï¼Ÿâ€",
                        correctAnswer: "å½“æˆ‘çš„è€å¸ˆ",
                        options: ["å½“æˆ‘çš„è€å¸ˆ", "ä¹°çº¸å’Œç¬”", "å¸¦æˆ‘å‡ºå»ç©", "ç»™æˆ‘è®²æ•…äº‹"]
                    },
                    {
                        sentence: "æ¯äº²é«˜å…´åœ°è¯´ï¼šâ€œå¥½ï¼â€å¯æ˜¯å®¶é‡Œæ²¡æœ‰_____ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ",
                        correctAnswer: "çº¸å’Œç¬”",
                        options: ["çº¸å’Œç¬”", "é’±", "ä¹¦å’Œæ¡Œå­", "è€å¸ˆ"]
                    },
                    {
                        sentence: "æ¯äº²æ‹¿ç€æ–°ç»‡æˆçš„å¸ƒï¼Œå¯¹å²³é£è¯´ï¼šå­©å­ï¼Œä½ åˆ°è¡—ä¸Šå»æŠŠè¿™å¸ƒå–äº†ï¼Œå†ä¹°äº›_____å›å®¶æ¥ã€‚",
                        correctAnswer: "çº¸å’Œç¬”",
                        options: ["çº¸å’Œç¬”", "è¡£æœ", "ç©å…·", "ç±³å’Œèœ"]
                    },
                    {
                        sentence: "å²³é£åˆ°äº†è¡—ä¸Šï¼ŒæŠŠå¸ƒå–äº†ï¼Œå´æ²¡æœ‰å»ä¹°çº¸å’Œç¬”ã€‚ä»–è·‘åˆ°_____ï¼Œè£…äº†æ»¡æ»¡ä¸€ç°¸ç®•çš„æ²™ã€‚",
                        correctAnswer: "å¤§æ±Ÿè¾¹",
                        options: ["å¤§æ±Ÿè¾¹", "å­¦æ ¡", "æ ‘æ—", "å±±ä¸Š"]
                    },
                    {
                        sentence: "å²³é£åˆæ‰¾äº†å‡ æ ¹æ ‘æï¼Œæ’åœ¨æ²™ä¸Šé¢ï¼Œç„¶ååŒæ‰‹æ§ç€ç°¸ç®•ï¼Œ_____åœ°å›å®¶äº†ã€‚",
                        correctAnswer: "é«˜é«˜å…´å…´",
                        options: ["é«˜é«˜å…´å…´", "æ…¢æ…¢", "ä¼¤å¿ƒ", "ç€æ€¥"]
                    },
                    {
                        sentence: "å²³é£æŠŠç°¸ç®•æ”¾åœ¨é—¨å£ï¼ŒæŠŠå–å¸ƒçš„é’±_____äº¤ç»™äº†æ¯äº²ã€‚",
                        correctAnswer: "å…¨éƒ¨",
                        options: ["å…¨éƒ¨", "ä¸€åŠ", "ä¸€ç‚¹", "å·å·"]
                    },
                    {
                        sentence: "æ¯äº²å¥‡æ€ªåœ°é—®ï¼šâ€œæˆ‘ä¸æ˜¯è®©ä½ å»ä¹°çº¸å’Œç¬”å—ï¼Ÿéš¾é“ä½ _____ï¼Ÿâ€",
                        correctAnswer: "å¿˜äº†",
                        options: ["å¿˜äº†", "ä¹°äº†", "è®°å¾—", "æ²¡å¬åˆ°"]
                    },
                    {
                        sentence: "å²³é£è¯´ï¼šâ€œå¦ˆå¦ˆæ‚¨æ¥çœ‹ï¼Œæˆ‘çš„çº¸å’Œç¬”éƒ½æœ‰äº†ã€‚â€å¦ˆå¦ˆçœ‹åˆ°ç°¸ç®•é‡Œçš„æ²™å’Œæ ‘æï¼Œç«‹åˆ»_____äº†ã€‚",
                        correctAnswer: "æ˜ç™½",
                        options: ["æ˜ç™½", "ç”Ÿæ°”", "æ€€ç–‘", "ç¬‘äº†"]
                    },
                    {
                        sentence: "ä»æ­¤ï¼Œå¥¹å°±æŠŠæ²™é“ºåœ¨åœ°ä¸Šå½“ä½œ_____ï¼Œç”¨æ ‘æå½“ä½œç¬”ã€‚",
                        correctAnswer: "çº¸",
                        options: ["çº¸", "å¸ƒ", "æœ¬å­", "åœ°"]
                    },
                    {
                        sentence: "æ¯äº²æ¯å¤©æ•™å²³é£ç»ƒå­—ã€‚å²³é£é•¿å¤§ä»¥åï¼Œæˆäº†ä¸€ä½å‹‡æ•¢çš„____ã€‚",
                        correctAnswer: "å°†å†›",
                        options: ["å°†å†›", "è€å¸ˆ", "å†œæ°‘", "åŒ»ç”Ÿ"]
                    },
                    {
                        sentence: "å²³é£ä¸ä»…æ˜¯ä¸€ä¸ªå°†å†›ï¼Œè¿˜æ˜¯ä¸­å›½å†å²ä¸Šå¾ˆ_____çš„è¯—äººã€‚",
                        correctAnswer: "äº†ä¸èµ·",
                        options: ["äº†ä¸èµ·", "å¹³å‡¡", "å®³ç¾", "å®‰é™"]
                    }],
                currentQuestionIndex: 0,
                userAnswers: [null, null, null, null]
            }
        };


        // DOMå…ƒç´ 
        const mapPage = document.getElementById('map-page');
        const level1Page = document.getElementById('level-1');
        const level2Page = document.getElementById('level-2');
        const level3Page = document.getElementById('level-3');
        const resultPage = document.getElementById('result-page');
        const levelPoints = document.querySelectorAll('.level-point');
        const levelCompleteOverlay = document.getElementById('level-complete-overlay');
        const completeTitle = document.getElementById('complete-title');
        const completeMessage = document.getElementById('complete-message');
        const completeIcon = document.getElementById('complete-icon');
        const continueButton = document.getElementById('continue-button');

        // æ£€æŸ¥æ˜¯å¦å·²å›ç­”æœ€å°‘4é¢˜
        function hasAnsweredMinimum(level, minRequired = 4) {
            const answeredCount = level.userAnswers.filter(a => a !== null).length;
            return answeredCount >= minRequired;
        }

        // éŸ³æ•ˆå‡½æ•°
        function playCorrectSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);

                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log("éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½æµè§ˆå™¨ä¸æ”¯æŒ");
            }
        }

        function playWrongSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.setValueAtTime(392.00, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(349.23, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(311.13, audioContext.currentTime + 0.2);

                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log("éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½æµè§ˆå™¨ä¸æ”¯æŒ");
            }
        }

        function playCompleteSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.setValueAtTime(523.25, audioContext.currentTime);
                oscillator.frequency.setValueAtTime(659.25, audioContext.currentTime + 0.1);
                oscillator.frequency.setValueAtTime(783.99, audioContext.currentTime + 0.2);
                oscillator.frequency.setValueAtTime(1046.50, audioContext.currentTime + 0.3);

                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.8);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.8);
            } catch (e) {
                console.log("éŸ³é¢‘æ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½æµè§ˆå™¨ä¸æ”¯æŒ");
            }
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            updateLevelUnlock();
            setupEventListeners();
        }

        // æ›´æ–°å…³å¡è§£é”çŠ¶æ€
        function updateLevelUnlock() {
            levelPoints.forEach((point, index) => {
                if (index === 0 || gameData.levelCompleted[index - 1]) {
                    point.classList.remove('locked');
                } else {
                    point.classList.add('locked');
                }
            });
        }

        // æ˜¾ç¤ºç¬¬ä¸€å…³é¢˜ç›®
        function showLevel1Question() {
            const level = gameData.level1;
            const currentIndex = level.currentQuestionIndex;
            const question = level.questions[currentIndex];

            document.getElementById('current-word').textContent = question.word;
            document.getElementById('level1-progress').textContent = `${currentIndex + 1}/15`;

            const optionsContainer = document.getElementById('level1-options');
            optionsContainer.innerHTML = '';

            const shuffledOptions = [...question.options].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option pinyin-text';
                optionElement.textContent = option;
                optionElement.dataset.answer = option;

                if (level.userAnswers[currentIndex] === option) {
                    optionElement.classList.add('selected');
                }

                optionElement.addEventListener('click', handleLevel1OptionClick);
                optionsContainer.appendChild(optionElement);
            });

            const feedback = document.getElementById('level1-feedback');
            feedback.style.display = 'none';
            feedback.className = 'feedback-container';

            updateLevel1Buttons();
        }

        // å¤„ç†ç¬¬ä¸€å…³é€‰é¡¹ç‚¹å‡»
        function handleLevel1OptionClick() {
            const options = document.querySelectorAll('#level1-options .option');
            options.forEach(option => {
                option.classList.remove('selected');
            });

            this.classList.add('selected');

            const answer = this.dataset.answer;
            const currentIndex = gameData.level1.currentQuestionIndex;
            gameData.level1.userAnswers[currentIndex] = answer;

            checkLevel1Answer(answer);
        }

        // æ£€æŸ¥ç¬¬ä¸€å…³ç­”æ¡ˆ
        function checkLevel1Answer(userAnswer) {
            const level = gameData.level1;
            const currentIndex = level.currentQuestionIndex;
            const question = level.questions[currentIndex];
            const options = document.querySelectorAll('#level1-options .option');

            const feedback = document.getElementById('level1-feedback');

            if (userAnswer === question.pinyin) {
                options.forEach(option => {
                    if (option.dataset.answer === userAnswer) {
                        option.classList.add('correct');
                    }
                });

                feedback.innerHTML = `
                    <div class="feedback-icon"><i class="fas fa-check-circle"></i></div>
                    <div class="feedback-text">å›ç­”æ­£ç¡®ï¼</div>
                    <div class="pinyin-feedback">${question.word} çš„æ‹¼éŸ³æ˜¯ <span class="pinyin-text">${question.pinyin}</span></div>
                `;
                feedback.className = 'feedback-container feedback-correct';
                feedback.style.display = 'block';

                playCorrectSound();
            } else {
                options.forEach(option => {
                    if (option.dataset.answer === userAnswer) {
                        option.classList.add('wrong');
                    }
                    if (option.dataset.answer === question.pinyin) {
                        option.classList.add('correct');
                    }
                });

                feedback.innerHTML = `
                    <div class="feedback-icon"><i class="fas fa-times-circle"></i></div>
                    <div class="feedback-text">å›ç­”é”™è¯¯ã€‚</div>
                    <div class="pinyin-feedback">${question.word} çš„æ­£ç¡®æ‹¼éŸ³æ˜¯ <span class="pinyin-text">${question.pinyin}</span></div>
                `;
                feedback.className = 'feedback-container feedback-wrong';
                feedback.style.display = 'block';

                playWrongSound();
            }

            updateLevel1Buttons();
        }

        // æ›´æ–°ç¬¬ä¸€å…³æŒ‰é’®çŠ¶æ€
        function updateLevel1Buttons() {
            const level = gameData.level1;
            const currentIndex = level.currentQuestionIndex;

            document.getElementById('prev-level1').disabled = currentIndex === 0;
            document.getElementById('reset-level1').disabled = level.userAnswers[currentIndex] === null;
            document.getElementById('next-level1').disabled = level.userAnswers[currentIndex] === null;
        }

        // æ˜¾ç¤ºç¬¬äºŒå…³é¢˜ç›®ï¼ˆæ”¹ä¸ºæ–‡å­—å¥å­ï¼Œä¸å†æ˜¾ç¤ºå›¾ç‰‡ï¼‰
        function showLevel2Question() {
            const level = gameData.level2;
            const currentIndex = level.currentQuestionIndex;
            const question = level.questions[currentIndex];

            // è¿›åº¦
            document.getElementById('level2-progress').textContent = `${currentIndex + 1}/4`;
            document.getElementById('current-question-num').textContent = currentIndex + 1;

            // åŸæ¥çš„å›¾ç‰‡åŒºåŸŸï¼Œç°åœ¨ç”¨æ¥æ˜¾ç¤ºå¥å­
            const imageDisplay = document.getElementById('level2-image-display');
            imageDisplay.innerHTML = '';

            const sentenceContainer = document.createElement('div');
            sentenceContainer.className = 'level2-sentence-container';

            const sentenceElement = document.createElement('div');
            sentenceElement.id = 'level2-sentence';
            sentenceElement.className = 'level2-sentence';
            sentenceElement.textContent = question.sentence;

            sentenceContainer.appendChild(sentenceElement);
            imageDisplay.appendChild(sentenceContainer);

            // ç”Ÿæˆé€‰é¡¹
            const optionsContainer = document.getElementById('level2-options');
            optionsContainer.innerHTML = '';

            const shuffledOptions = [...question.options].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach((option) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.dataset.answer = option;

                if (level.userAnswers[currentIndex] === option) {
                    optionElement.classList.add('selected');
                }

                optionElement.addEventListener('click', handleLevel2OptionClick);
                optionsContainer.appendChild(optionElement);
            });

            const feedback = document.getElementById('level2-feedback');
            feedback.style.display = 'none';
            feedback.className = 'feedback-container';

            updateLevel2Buttons();
        }

        // å¤„ç†ç¬¬äºŒå…³é€‰é¡¹ç‚¹å‡»
        function handleLevel2OptionClick() {
            const options = document.querySelectorAll('#level2-options .option');
            options.forEach(option => {
                option.classList.remove('selected');
            });

            this.classList.add('selected');

            const answer = this.dataset.answer;
            const currentIndex = gameData.level2.currentQuestionIndex;
            gameData.level2.userAnswers[currentIndex] = answer;

            checkLevel2Answer(answer);
        }

        // æ£€æŸ¥ç¬¬äºŒå…³ç­”æ¡ˆï¼ˆå¥å­ + æ­£ç¡®è§£é‡Šï¼‰
        function checkLevel2Answer(userAnswer) {
            const level = gameData.level2;
            const currentIndex = level.currentQuestionIndex;
            const question = level.questions[currentIndex];
            const options = document.querySelectorAll('#level2-options .option');

            const feedback = document.getElementById('level2-feedback');

            if (userAnswer === question.correctAnswer) {
                // æ ‡è®°é€‰ä¸­çš„é€‰é¡¹ä¸ºæ­£ç¡®
                options.forEach(option => {
                    if (option.dataset.answer === userAnswer) {
                        option.classList.add('correct');
                    }
                });

                feedback.innerHTML = `
            <div class="feedback-icon"><i class="fas fa-check-circle"></i></div>
            <div class="feedback-text">
                å›ç­”æ­£ç¡®ï¼æ­£ç¡®æ„æ€æ˜¯ï¼š${question.correctAnswer}
            </div>
        `;
                feedback.className = 'feedback-container feedback-correct';
                feedback.style.display = 'block';

                playCorrectSound();
            } else {
                // æ ‡è®°é”™é¢˜å’Œæ­£ç¡®ç­”æ¡ˆ
                options.forEach(option => {
                    if (option.dataset.answer === userAnswer) {
                        option.classList.add('wrong');
                    }
                    if (option.dataset.answer === question.correctAnswer) {
                        option.classList.add('correct');
                    }
                });

                feedback.innerHTML = `
            <div class="feedback-icon"><i class="fas fa-times-circle"></i></div>
            <div class="feedback-text">
                å›ç­”é”™è¯¯ã€‚æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${question.correctAnswer}
            </div>
        `;
                feedback.className = 'feedback-container feedback-wrong';
                feedback.style.display = 'block';

                playWrongSound();
            }

            updateLevel2Buttons();
        }

        // æ›´æ–°ç¬¬äºŒå…³æŒ‰é’®çŠ¶æ€ï¼ˆè¿™ä¸€æ®µåŸæ ·ä¿ç•™å³å¯ï¼‰
        function updateLevel2Buttons() {
            const level = gameData.level2;
            const currentIndex = level.currentQuestionIndex;

            document.getElementById('prev-level2').disabled = currentIndex === 0;
            document.getElementById('reset-level2').disabled = level.userAnswers[currentIndex] === null;
            document.getElementById('next-level2').disabled = level.userAnswers[currentIndex] === null;
        }


        // æ˜¾ç¤ºç¬¬ä¸‰å…³é¢˜ç›®
        function showLevel3Question() {
            const level = gameData.level3;
            const currentIndex = level.currentQuestionIndex;
            const question = level.questions[currentIndex];

            document.getElementById('level3-progress').textContent = `${currentIndex + 1}/13`;
            document.getElementById('level3-sentence').textContent = question.sentence;

            const optionsContainer = document.getElementById('level3-options');
            optionsContainer.innerHTML = '';

            const shuffledOptions = [...question.options].sort(() => Math.random() - 0.5);

            shuffledOptions.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.dataset.answer = option;

                if (level.userAnswers[currentIndex] === option) {
                    optionElement.classList.add('selected');
                }

                optionElement.addEventListener('click', handleLevel3OptionClick);
                optionsContainer.appendChild(optionElement);
            });

            const feedback = document.getElementById('level3-feedback');
            feedback.style.display = 'none';
            feedback.className = 'feedback-container';

            updateLevel3Buttons();
        }

        // å¤„ç†ç¬¬ä¸‰å…³é€‰é¡¹ç‚¹å‡»
        function handleLevel3OptionClick() {
            const options = document.querySelectorAll('#level3-options .option');
            options.forEach(option => {
                option.classList.remove('selected');
            });

            this.classList.add('selected');

            const answer = this.dataset.answer;
            const currentIndex = gameData.level3.currentQuestionIndex;
            gameData.level3.userAnswers[currentIndex] = answer;

            checkLevel3Answer(answer);
        }

        // æ£€æŸ¥ç¬¬ä¸‰å…³ç­”æ¡ˆ
        function checkLevel3Answer(userAnswer) {
            const level = gameData.level3;
            const currentIndex = level.currentQuestionIndex;
            const question = level.questions[currentIndex];
            const options = document.querySelectorAll('#level3-options .option');

            const feedback = document.getElementById('level3-feedback');

            if (userAnswer === question.correctAnswer) {
                options.forEach(option => {
                    if (option.dataset.answer === userAnswer) {
                        option.classList.add('correct');
                    }
                });

                feedback.innerHTML = `
                    <div class="feedback-icon"><i class="fas fa-check-circle"></i></div>
                    <div class="feedback-text">å›ç­”æ­£ç¡®ï¼å¥å­åº”è¯¥å¡«ï¼š${question.correctAnswer}</div>
                `;
                feedback.className = 'feedback-container feedback-correct';
                feedback.style.display = 'block';

                playCorrectSound();
            } else {
                options.forEach(option => {
                    if (option.dataset.answer === userAnswer) {
                        option.classList.add('wrong');
                    }
                    if (option.dataset.answer === question.correctAnswer) {
                        option.classList.add('correct');
                    }
                });

                feedback.innerHTML = `
                    <div class="feedback-icon"><i class="fas fa-times-circle"></i></div>
                    <div class="feedback-text">å›ç­”é”™è¯¯ã€‚å¥å­çš„æ­£ç¡®ç­”æ¡ˆæ˜¯ï¼š${question.correctAnswer}</div>
                `;
                feedback.className = 'feedback-container feedback-wrong';
                feedback.style.display = 'block';

                playWrongSound();
            }

            updateLevel3Buttons();
        }

        // æ›´æ–°ç¬¬ä¸‰å…³æŒ‰é’®çŠ¶æ€
        function updateLevel3Buttons() {
            const level = gameData.level3;
            const currentIndex = level.currentQuestionIndex;

            document.getElementById('prev-level3').disabled = currentIndex === 0;
            document.getElementById('reset-level3').disabled = level.userAnswers[currentIndex] === null;
            document.getElementById('next-level3').disabled = level.userAnswers[currentIndex] === null;
        }

        // æ˜¾ç¤ºé¡µé¢
        function showPage(page) {
            mapPage.style.display = 'none';
            level1Page.style.display = 'none';
            level2Page.style.display = 'none';
            level3Page.style.display = 'none';
            resultPage.style.display = 'none';

            page.style.display = 'block';
        }

        // æ˜¾ç¤ºåœ°å›¾é¡µé¢
        function showMapPage() {
            showPage(mapPage);
        }

        // æ˜¾ç¤ºç¬¬ä¸€å…³é¡µé¢
        function showLevel1Page() {
            showLevel1Question();
            showPage(level1Page);
        }

        // æ˜¾ç¤ºç¬¬äºŒå…³é¡µé¢
        function showLevel2Page() {
            showLevel2Question();
            showPage(level2Page);
        }

        // æ˜¾ç¤ºç¬¬ä¸‰å…³é¡µé¢
        function showLevel3Page() {
            showLevel3Question();
            showPage(level3Page);
        }

        // é‡ç½®å½“å‰é¢˜ç›®é€‰æ‹©
        function resetCurrentQuestion() {
            const levelNum = gameData.currentLevel;
            let level;

            if (levelNum === 1) {
                level = gameData.level1;
            } else if (levelNum === 2) {
                level = gameData.level2;
            } else {
                level = gameData.level3;
            }

            const currentIndex = level.currentQuestionIndex;
            level.userAnswers[currentIndex] = null;

            if (levelNum === 1) {
                showLevel1Question();
            } else if (levelNum === 2) {
                showLevel2Question();
            } else {
                showLevel3Question();
            }
        }

        // æ˜¾ç¤ºå…³å¡å®Œæˆæç¤º
        function showLevelComplete(levelNum) {
            let title, message, iconClass;

            switch (levelNum) {
                case 1:
                    title = "æ­å–œå®Œæˆç¬¬ä¸€å…³ï¼";
                    message = "æ‚¨å·²æˆåŠŸæŒæ¡å››ä¸ªè¯è¯­çš„æ­£ç¡®æ‹¼éŸ³ï¼å¯ä»¥è¿›å…¥ä¸‹ä¸€å…³äº†ï¼";
                    iconClass = "fas fa-language";
                    break;
                case 2:
                    title = "æ­å–œå®Œæˆç¬¬äºŒå…³ï¼";
                    message = "æ‚¨å·²æˆåŠŸé€šè¿‡æœ¬å‘¨é˜…è¯»ç†è§£ï¼å¯ä»¥è¿›å…¥æœ€åä¸€å…³äº†ï¼";
                    iconClass = "fas fa-images";
                    break;
                case 3:
                    title = "æ­å–œå®Œæˆç¬¬ä¸‰å…³ï¼";
                    message = "æ‚¨å·²æˆåŠŸå­¦ä¼šåœ¨å¥å­ä¸­æ­£ç¡®ä½¿ç”¨è¿™äº›è¯è¯­ï¼æ‰€æœ‰å…³å¡éƒ½å·²å®Œæˆï¼";
                    iconClass = "fas fa-edit";
                    break;
            }

            completeTitle.textContent = title;
            completeMessage.textContent = message;
            completeIcon.innerHTML = `<i class="${iconClass}"></i>`;

            if (levelNum === 3) {
                continueButton.innerHTML = `<i class="fas fa-award"></i> æŸ¥çœ‹å­¦ä¹ æˆæœ`;
            } else {
                continueButton.innerHTML = `<i class="fas fa-arrow-right"></i> ç»§ç»­ä¸‹ä¸€å…³`;
            }

            levelCompleteOverlay.style.display = 'flex';

            playCompleteSound();
        }

        // å¤„ç†ç¬¬ä¸€å…³ä¸‹ä¸€é¢˜
        function handleLevel1Next() {
            const level = gameData.level1;

            level.currentQuestionIndex++;

            if (level.currentQuestionIndex < level.questions.length) {
                showLevel1Question();
            } else {
                // âœ… Only complete the level if 4 or more answers are provided
                if (hasAnsweredMinimum(level, 4)) {
                    gameData.levelCompleted[0] = true;
                    updateLevelUnlock();
                    showLevelComplete(1);
                } else {
                    alert("è¯·è‡³å°‘å›ç­”4é“é¢˜ç›®æ‰èƒ½è¿›å…¥ä¸‹ä¸€å…³ï¼");
                }

                level.currentQuestionIndex = 0;
            }
        }

        // å¤„ç†ç¬¬ä¸€å…³ä¸Šä¸€é¢˜
        function handleLevel1Prev() {
            const level = gameData.level1;
            if (level.currentQuestionIndex > 0) {
                level.currentQuestionIndex--;
                showLevel1Question();
            }
        }

        // å¤„ç†ç¬¬äºŒå…³ä¸‹ä¸€é¢˜
        function handleLevel2Next() {
            const level = gameData.level2;
            level.currentQuestionIndex++;

            if (level.currentQuestionIndex < level.questions.length) {
                showLevel2Question();
            } else {
                gameData.levelCompleted[1] = true;
                updateLevelUnlock();

                showLevelComplete(2);

                level.currentQuestionIndex = 0;
            }
        }

        // å¤„ç†ç¬¬äºŒå…³ä¸Šä¸€é¢˜
        function handleLevel2Prev() {
            const level = gameData.level2;
            if (level.currentQuestionIndex > 0) {
                level.currentQuestionIndex--;
                showLevel2Question();
            }
        }

        // å¤„ç†ç¬¬ä¸‰å…³ä¸‹ä¸€é¢˜
        function handleLevel3Next() {
            const level = gameData.level3;
            level.currentQuestionIndex++;

            if (level.currentQuestionIndex < level.questions.length) {
                showLevel3Question();
            } else {
                gameData.levelCompleted[2] = true;

                showLevelComplete(3);

                level.currentQuestionIndex = 0;
            }
        }

        // å¤„ç†ç¬¬ä¸‰å…³ä¸Šä¸€é¢˜
        function handleLevel3Prev() {
            const level = gameData.level3;
            if (level.currentQuestionIndex > 0) {
                level.currentQuestionIndex--;
                showLevel3Question();
            }
        }

        // æ˜¾ç¤ºæœ€ç»ˆç»“æœ
        function showFinalResult() {
            showPage(resultPage);
        }

        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            gameData.currentLevel = 1;
            gameData.levelCompleted = [false, false, false];

            gameData.level1.currentQuestionIndex = 0;
            gameData.level1.userAnswers = [null, null, null, null];

            gameData.level2.currentQuestionIndex = 0;
            gameData.level2.userAnswers = [null, null, null, null];

            gameData.level3.currentQuestionIndex = 0;
            gameData.level3.userAnswers = [null, null, null, null];

            updateLevelUnlock();
            showMapPage();
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬å™¨
        function setupEventListeners() {
            levelPoints.forEach((point, index) => {
                point.addEventListener('click', function () {
                    if (this.classList.contains('locked')) return;

                    gameData.currentLevel = index + 1;

                    switch (index) {
                        case 0:
                            showLevel1Page();
                            break;
                        case 1:
                            showLevel2Page();
                            break;
                        case 2:
                            showLevel3Page();
                            break;
                    }
                });
            });

            document.getElementById('back-to-map-1').addEventListener('click', showMapPage);
            document.getElementById('back-to-map-2').addEventListener('click', showMapPage);
            document.getElementById('back-to-map-3').addEventListener('click', showMapPage);

            document.getElementById('next-level1').addEventListener('click', handleLevel1Next);
            document.getElementById('next-level2').addEventListener('click', handleLevel2Next);
            document.getElementById('next-level3').addEventListener('click', handleLevel3Next);

            document.getElementById('prev-level1').addEventListener('click', handleLevel1Prev);
            document.getElementById('prev-level2').addEventListener('click', handleLevel2Prev);
            document.getElementById('prev-level3').addEventListener('click', handleLevel3Prev);

            document.getElementById('reset-level1').addEventListener('click', resetCurrentQuestion);
            document.getElementById('reset-level2').addEventListener('click', resetCurrentQuestion);
            document.getElementById('reset-level3').addEventListener('click', resetCurrentQuestion);

            document.getElementById('restart-game').addEventListener('click', resetGame);

            continueButton.addEventListener('click', function () {
                levelCompleteOverlay.style.display = 'none';

                if (gameData.currentLevel === 3) {
                    showFinalResult();
                } else {
                    showMapPage();
                }
            });

            levelCompleteOverlay.addEventListener('click', function (e) {
                if (e.target === this) {
                    this.style.display = 'none';
                }
            });
        }

        document.querySelector(".dropbtn").addEventListener("click", function () {
            document.querySelector(".dropdown-content").classList.toggle("show");
        });

        window.addEventListener("click", function (event) {
            if (!event.target.matches(".dropbtn")) {
                const dropdowns = document.querySelectorAll(".dropdown-content");
                dropdowns.forEach((dropdown) => {
                    if (dropdown.classList.contains("show")) {
                        dropdown.classList.remove("show");
                    }
                });
            }
        });


        // åˆå§‹åŒ–æ¸¸æˆ
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>

</html>